<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Koji 1.19.0 Release notes &mdash; Koji alpha documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Koji 1.18.1 Release Notes" href="release_notes_1.18.1.html" />
    <link rel="prev" title="Koji 1.19.1 Release notes" href="release_notes_1.19.1.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Koji
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Operations Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../server_howto.html">Server Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server_bootstrap.html">Koji Server Bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../external_repo_server_bootstrap.html">External Repository Server Bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kerberos_gssapi_debug.html">Koji Kerberos/GSSAPI debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kojid_conf.html">kojid.conf Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hub_conf.html">hub.conf options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database_howto.html">Database Performance Howto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../image_build.html">Building Images in Koji</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../supported_platforms.html">Supported Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tasks.html">Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils.html">Koji Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../volumes.html">Storage Volumes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../containers.html">Running Koji in Containers</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../releases.html">Releases</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../CVEs/CVEs.html">Koji CVEs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../migrations/migrations.html">Migrations</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="release_notes.html">Release Notes</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.27.html">Koji 1.27.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.26.1.html">Koji 1.26.1 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.26.html">Koji 1.26.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.25.1.html">Koji 1.25.1 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.25.html">Koji 1.25.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.24.1.html">Koji 1.24.1 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.24.html">Koji 1.24.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.23.1.html">Koji 1.23.1 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.23.html">Koji 1.23.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.22.1.html">Koji 1.22.1 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.22.html">Koji 1.22.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.21.1.html">Koji 1.21.1 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.21.html">Koji 1.21.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.20.1.html">Koji 1.20.1 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.20.html">Koji 1.20.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.19.1.html">Koji 1.19.1 Release notes</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Koji 1.19.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.18.1.html">Koji 1.18.1 Release Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.18.html">Koji 1.18.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.17.html">Koji 1.17.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.16.2.html">Koji 1.16.2 Release Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.16.1.html">Koji 1.16.1 Release Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.16.html">Koji 1.16.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.15.1.html">Koji 1.15.1 Release Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.15.html">Koji 1.15 Release Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.14.html">Koji 1.14 Release Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.13.html">Koji 1.13 Release Notes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Administration%20Guide/index.html">Administration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../User%20Guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Developer%20Guide/index.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../HOWTO.html">Koji HOWTO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc.html">Koji Miscellaneous Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../runs_here.html">Runs Here</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Koji</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Operations Guide</a> &raquo;</li>
          <li><a href="../releases.html">Releases</a> &raquo;</li>
          <li><a href="release_notes.html">Release Notes</a> &raquo;</li>
      <li>Koji 1.19.0 Release notes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/Operations Guide/release_notes/release_notes_1.19.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="koji-1-19-0-release-notes">
<h1>Koji 1.19.0 Release notes<a class="headerlink" href="#koji-1-19-0-release-notes" title="Permalink to this headline"></a></h1>
<div class="section" id="migrating-from-koji-1-18">
<h2>Migrating from Koji 1.18<a class="headerlink" href="#migrating-from-koji-1-18" title="Permalink to this headline"></a></h2>
<p>For details on migrating see <a class="reference internal" href="../migrations/migrating_to_1.19.html"><span class="doc">Migrating to Koji 1.19</span></a></p>
</div>
<div class="section" id="security-fixes">
<h2>Security Fixes<a class="headerlink" href="#security-fixes" title="Permalink to this headline"></a></h2>
<p><strong>GSSAPI authentication checks kerberos principal</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1419">https://pagure.io/koji/pull-request/1419</a></div>
</div>
<p>When using GSSAPI authentication the user’s kerberos principal will be checked
for their username to avoid a potential username and kerberos principal mismatch.</p>
</div>
<div class="section" id="client-changes">
<h2>Client Changes<a class="headerlink" href="#client-changes" title="Permalink to this headline"></a></h2>
<p><strong>Add user edit</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/902">https://pagure.io/koji/pull-request/902</a></div>
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1701">https://pagure.io/koji/pull-request/1701</a></div>
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1713">https://pagure.io/koji/pull-request/1713</a></div>
</div>
<p>A new <code class="docutils literal notranslate"><span class="pre">edit-user</span></code> command and API call was added, allowing for user rename,
and changing, adding, or removing the kerberos principal of a user.</p>
<p><strong>Add remove group</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/923">https://pagure.io/koji/pull-request/923</a></div>
</div>
<p>A new <code class="docutils literal notranslate"><span class="pre">remove-group</span></code> command was added, allowing the removal of a group
from a tag. It uses the existing <code class="docutils literal notranslate"><span class="pre">groupListRemove</span></code> API call.</p>
<p><strong>Query builds per chunks in prune-signed-builds</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1589">https://pagure.io/koji/pull-request/1589</a></div>
</div>
<p>For bigger installations querying all builds can cause the hub to run out of memory.
<code class="docutils literal notranslate"><span class="pre">prune-signed-builds</span></code> now queries these in 50k chunks.</p>
<p><strong>Show inheritance flags in list-tag-inheritance output</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1120">https://pagure.io/koji/pull-request/1120</a></div>
</div>
<p>While not often used, tag inheritance can be modified with a few different options (e.g. maxdepth).
These options are shown in the <code class="docutils literal notranslate"><span class="pre">taginfo</span></code> display, but not the <code class="docutils literal notranslate"><span class="pre">list-tag-inheritance</span></code> display.
This change adds basic indicators to the latter.</p>
<p><strong>Return usage information in make-task</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1157">https://pagure.io/koji/pull-request/1157</a></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">make-task</span></code> now returns usage information if no arguments are provided.</p>
<p><strong>Clarify clone-tag usage</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1623">https://pagure.io/koji/pull-request/1623</a></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">clone-tag</span></code> help text now clarifies that the destination tag will be created
if it does not already exist.</p>
<p><strong>Add option check for list-signed</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1631">https://pagure.io/koji/pull-request/1631</a></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">list-signed</span></code> command will now fail if no options are provided.</p>
</div>
<div class="section" id="library-changes">
<h2>Library Changes<a class="headerlink" href="#library-changes" title="Permalink to this headline"></a></h2>
<p><strong>Consolidate config reading style</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1296">https://pagure.io/koji/pull-request/1296</a></div>
</div>
<p>Changes have been made to make configuration handling more consistent.</p>
<p>With this new implementation:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_config_files</span></code> is extended with a strict option and directory support</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ConfigParser</span></code> is used for all invokings except kojixmlrpc and <code class="docutils literal notranslate"><span class="pre">kojid</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RawConfigParser</span></code> is used for <code class="docutils literal notranslate"><span class="pre">kojid</span></code></p></li>
</ul>
<p><strong>list_archive_files handles multi-type builds</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1508">https://pagure.io/koji/pull-request/1508</a></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">list_archive_files</span></code> is provided a build with multiple archive types it now correctly
handles them instead of failing.</p>
<p><strong>Disallow archive imports that don’t match build type</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1627">https://pagure.io/koji/pull-request/1627</a></div>
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1633">https://pagure.io/koji/pull-request/1633</a></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">importArchive</span></code> call now refuses to proceed if the build does not have the given type.</p>
<p><strong>Add listCG RPC</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1160">https://pagure.io/koji/pull-request/1160</a></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">listCGs</span></code> has been added to list new content generator records.</p>
<p>The purpose of this change is to make it easier for administrators to determine what
content generators are present and what user accounts have access to those.</p>
<p><strong>Add method to cancel CG reservations</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1662">https://pagure.io/koji/pull-request/1662</a></div>
</div>
<p>The new <code class="docutils literal notranslate"><span class="pre">CGRefundBuild</span></code> call allows CGs to cancel build reservations, such as in the case
of a failing build.</p>
<p><strong>Allow ClientSession objects to get cleaned up by the garbage collector</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1653">https://pagure.io/koji/pull-request/1653</a></div>
</div>
<p>This change ensures <code class="docutils literal notranslate"><span class="pre">koji.ClientSession</span></code> objects are destroyed once their requests are complete.</p>
<p><strong>Add missing package list check</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1244">https://pagure.io/koji/pull-request/1244</a></div>
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1702">https://pagure.io/koji/pull-request/1702</a></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">host.tagBuild</span></code> method was missing a check to ensure the package was actually listed in the
destination tag. This should now be checked as expected.</p>
<p><strong>Increase buildReferences SQL performance</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1675">https://pagure.io/koji/pull-request/1675</a></div>
</div>
<p>The performance for <code class="docutils literal notranslate"><span class="pre">build_references</span></code> has been improved.</p>
<p><strong>ensuredir does not duplicate directories</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1197">https://pagure.io/koji/pull-request/1197</a></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">koji.ensuredir</span></code> no longer creates duplicate directories if provided a path ending in a
forward slash.</p>
<p><strong>Warn users if buildroot uses yum instead of dnf</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1595">https://pagure.io/koji/pull-request/1595</a></div>
</div>
<p>This change sets the mock config <code class="docutils literal notranslate"><span class="pre">dnf_warning</span></code> to True for buildroots using yum.</p>
<p><strong>Tag permission can be used for tagBuildBypass and untagBuildBypass</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1685">https://pagure.io/koji/pull-request/1685</a></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">tag</span></code> permission can now be used in place of admin to call <code class="docutils literal notranslate"><span class="pre">tagBuildBypass</span></code>
and <code class="docutils literal notranslate"><span class="pre">untagBuildBypass</span></code>. Admin is still required to use the <code class="docutils literal notranslate"><span class="pre">--force</span></code> option.</p>
<p><strong>Rework update of reserved builds</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1621">https://pagure.io/koji/pull-request/1621</a></div>
</div>
<p>This change reworks and simplifies the code that updates reserved build entries for cg imports.
It removes redundancy with checks in <code class="docutils literal notranslate"><span class="pre">prep_build</span></code> and avoids duplicate <code class="docutils literal notranslate"><span class="pre">*BuildStateChange</span></code>
callbacks.</p>
<p><strong>Use correct top limit for randint</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1612">https://pagure.io/koji/pull-request/1612</a></div>
</div>
<p>The top limit for <code class="docutils literal notranslate"><span class="pre">randint</span></code> has been set to 255 from 256 to prevent <code class="docutils literal notranslate"><span class="pre">generate_token</span></code> from
creating unneccesarily long tokens.</p>
<p><strong>Add strict option to getRPMFile</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1068">https://pagure.io/koji/pull-request/1068</a></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">getRPMFile</span></code> now has a <code class="docutils literal notranslate"><span class="pre">strict</span></code> option, failing when the RPM or filename does not exist.</p>
<p><strong>Stricter groupListRemove</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1173">https://pagure.io/koji/pull-request/1173</a></div>
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1678">https://pagure.io/koji/pull-request/1678</a></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">groupListRemove</span></code> now returns an error if the provided group does not exist for the tag.</p>
<p><strong>Clarified docs for build.extra.source</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1677">https://pagure.io/koji/pull-request/1677</a></div>
</div>
<p>The usage for <code class="docutils literal notranslate"><span class="pre">build.extra.source</span></code> has now been clarified in the <code class="docutils literal notranslate"><span class="pre">getBuild</span></code> call.</p>
<p><strong>Use bytes for debug string</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1657">https://pagure.io/koji/pull-request/1657</a></div>
</div>
<p>This change fixes debug output for Python 3.</p>
<p><strong>Removed host.repoAddRPM call</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1680">https://pagure.io/koji/pull-request/1680</a></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">host.repoAddRPM</span></code> call has been removed because it was unused and broken.</p>
</div>
<div class="section" id="web-ui-changes">
<h2>Web UI Changes<a class="headerlink" href="#web-ui-changes" title="Permalink to this headline"></a></h2>
<p><strong>Made difference between Builds and Tags sections more clear</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1676">https://pagure.io/koji/pull-request/1676</a></div>
</div>
<p>The search page results for packages now has a clearer delineation between builds and tags.</p>
</div>
<div class="section" id="builder-changes">
<h2>Builder Changes<a class="headerlink" href="#builder-changes" title="Permalink to this headline"></a></h2>
<p><strong>Use preferred arch when builder provides multiple</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1684">https://pagure.io/koji/pull-request/1684</a></div>
</div>
<p>When using ExclusiveArch for noarch builds the build task will now use the
arch specified instead of randomly picking from the arches the builder provides.</p>
<p>This change adds a <code class="docutils literal notranslate"><span class="pre">preferred_arch</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">find_arch</span></code>.</p>
<p><strong>Log insufficient disk space location</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1523">https://pagure.io/koji/pull-request/1523</a></div>
</div>
<p>When <code class="docutils literal notranslate"><span class="pre">kojid</span></code> fails due to insufficient disk space, the directory which needs more
disk space is now included as part of the log message.</p>
<p><strong>Allow builder to attempt krb if gssapi is available</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1613">https://pagure.io/koji/pull-request/1613</a></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">kojid</span></code> will now use <code class="docutils literal notranslate"><span class="pre">requests_kebreros</span></code> for kerberos authentication when available.</p>
<p><strong>Add support for new mock exit codes</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1682">https://pagure.io/koji/pull-request/1682</a></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">kojid</span></code> now expects mock exit code 10 for failed builds (previously 1).</p>
<p><strong>Fix kickstart uploads for Python 3</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1618">https://pagure.io/koji/pull-request/1618</a></div>
</div>
<p>This change fixes the file handling of kickstarts for Python 3.</p>
</div>
<div class="section" id="system-changes">
<h2>System Changes<a class="headerlink" href="#system-changes" title="Permalink to this headline"></a></h2>
<p><strong>Package ownership changes do not trigger repo regens</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1473">https://pagure.io/koji/pull-request/1473</a></div>
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1643">https://pagure.io/koji/pull-request/1643</a></div>
</div>
<p>Changing tag or package owners no longer cause repo regeneration. A new
<code class="docutils literal notranslate"><span class="pre">tag_package_owners</span></code> table has been added for this purpose.</p>
<p><strong>Support multiple realms by kerberos auth</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1648">https://pagure.io/koji/pull-request/1648</a></div>
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1696">https://pagure.io/koji/pull-request/1696</a></div>
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1701">https://pagure.io/koji/pull-request/1701</a></div>
</div>
<p>This change adds a new table <code class="docutils literal notranslate"><span class="pre">user_krb_principals</span></code> which tracks a list of <code class="docutils literal notranslate"><span class="pre">krb_principals</span></code>
for each user instead of the previous one-to-one mapping. In addition:</p>
<ul class="simple">
<li><p>all APIs related to user or krb principals are changed</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">userinfo</span></code> of <code class="docutils literal notranslate"><span class="pre">getUser</span></code> will contain a new list <code class="docutils literal notranslate"><span class="pre">krb_principals</span></code></dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">krb_principals</span></code> will contain all available principals if <code class="docutils literal notranslate"><span class="pre">krb_princs=True</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><p>there is a new hub option <code class="docutils literal notranslate"><span class="pre">AllowedKrbRealms</span></code> to indicate which realms are allowed</p></li>
<li><dl class="simple">
<dt>there is a new client option <code class="docutils literal notranslate"><span class="pre">krb_server_realm</span></code> to allow krbV login to set server realm</dt><dd><ul>
<li><p>Previously same as client principal realm before, supported by all clients</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QueryProcessor</span></code> has a new queryOpt <code class="docutils literal notranslate"><span class="pre">group</span></code>, which is used to generate <code class="docutils literal notranslate"><span class="pre">GROUP</span> <span class="pre">BY</span></code> section</dt><dd><ul>
<li><p>By default, this feature is disabled by arg <code class="docutils literal notranslate"><span class="pre">enable_group=False</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p><strong>Added cronjob for sessions table maintenance</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1492">https://pagure.io/koji/pull-request/1492</a></div>
</div>
<p>The sessions table is now periodically cleaned up via script (handled by cron by default).
Without this the sessions table can grow large enough to affect Koji performance.</p>
<p><strong>Added basic email template for koji-gc</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1430">https://pagure.io/koji/pull-request/1430</a></div>
</div>
<p>The email message koji-gc uses has been moved to <code class="docutils literal notranslate"><span class="pre">/etc/koji-gc/email.tpl</span></code> for
easier customization.</p>
<p><strong>Add all permissions to database</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1681">https://pagure.io/koji/pull-request/1681</a></div>
</div>
<p>Permissions previously missing from schema have been added, including <code class="docutils literal notranslate"><span class="pre">dist-repo</span></code>, <code class="docutils literal notranslate"><span class="pre">host</span></code>,
<code class="docutils literal notranslate"><span class="pre">image-import</span></code>, <code class="docutils literal notranslate"><span class="pre">sign</span></code>, <code class="docutils literal notranslate"><span class="pre">tag</span></code>, and <code class="docutils literal notranslate"><span class="pre">target</span></code>.</p>
<p><strong>Add new CoreOS artifact types</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1616">https://pagure.io/koji/pull-request/1616</a></div>
</div>
<p>This change adds the new CoreOS artifact types <code class="docutils literal notranslate"><span class="pre">iso-compressed</span></code>, <code class="docutils literal notranslate"><span class="pre">vhd-compressed</span></code>,
<code class="docutils literal notranslate"><span class="pre">vhdx-compressed</span></code>, and <code class="docutils literal notranslate"><span class="pre">vmdk-compressed</span></code> to the database.</p>
<p><strong>Enforce unique content generator names in database</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1159">https://pagure.io/koji/pull-request/1159</a></div>
</div>
<p>Set a uniqueness constraint on the content generator name in the database.
Prior to this change, we were only enforcing this in the hub application layer.
Configure this in postgres for safety.</p>
<p><strong>Fix typo preventing VM builds</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1666">https://pagure.io/koji/pull-request/1666</a></div>
</div>
<p>This change fixes the options passed to <code class="docutils literal notranslate"><span class="pre">verifyChecksum</span></code> which was preventing VM builds.</p>
<p><strong>Fix verifyChecksum for non-output files</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1670">https://pagure.io/koji/pull-request/1670</a></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">verifyChecksum</span></code> now accepts files under the build requires path as well as the output path.
Other paths can be added as needed.</p>
<p><strong>Set f30+ python-devel default</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1683">https://pagure.io/koji/pull-request/1683</a></div>
</div>
<p>When installed on a Fedora 30+ host with Python 2 support, Koji will now require
<code class="docutils literal notranslate"><span class="pre">python2-devel</span></code> instead of <code class="docutils literal notranslate"><span class="pre">python-devel</span></code>.</p>
<p><strong>Handle sys.exc_clear for Python 3</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1642">https://pagure.io/koji/pull-request/1642</a></div>
</div>
<p>The method <code class="docutils literal notranslate"><span class="pre">sys.exc_clear</span></code> does not exist in Python 3, so it has been escaped for those instances.</p>
<p><strong>Remove deprecated koji.util.relpath</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1458">https://pagure.io/koji/pull-request/1458</a></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">koji.util.relpath</span></code> was deprecated in 1.16 and has been removed from 1.19.</p>
<p><strong>Remove deprecated BuildRoot.uploadDir</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1511">https://pagure.io/koji/pull-request/1511</a></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">BuildRoot.uploadDir</span></code> was deprecated in 1.18 and has been removed from 1.19.</p>
<p><strong>Remove deprecated koji_cli.lib_unique_path</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1512">https://pagure.io/koji/pull-request/1512</a></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">koji_cli.lib_unique_path</span></code> was deprecated in 1.17 and has been removed from 1.19.</p>
<p><strong>Deprecation of sha1_constructor and md5_constructor</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1490">https://pagure.io/koji/pull-request/1490</a></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">sha1_constructor</span></code> and <code class="docutils literal notranslate"><span class="pre">md5_constructor</span></code> have been deprecated in favor of <code class="docutils literal notranslate"><span class="pre">hashlib</span></code>.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="release_notes_1.19.1.html" class="btn btn-neutral float-left" title="Koji 1.19.1 Release notes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="release_notes_1.18.1.html" class="btn btn-neutral float-right" title="Koji 1.18.1 Release Notes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, Mike McLean, Mike B, Dennis Gilmore, Mathieu Bridon, Ian McLeod, Ralph Bean, Adam Miller.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>