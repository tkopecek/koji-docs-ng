<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Koji 1.17.0 Release notes &mdash; Koji alpha documentation</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Koji 1.16.2 Release Notes" href="release_notes_1.16.2.html" />
    <link rel="prev" title="Koji 1.18.0 Release notes" href="release_notes_1.18.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Koji
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Operations Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../server_howto.html">Server Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server_bootstrap.html">Koji Server Bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../volumes.html">Storage Volumes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../external_repo_server_bootstrap.html">External Repository Server Bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kerberos_gssapi_debug.html">Koji Kerberos/GSSAPI debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kojid_conf.html">Builder Configuration Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hub_conf.html">Hub Configuration Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database_howto.html">Database Performance Howto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../image_build.html">Building Images in Koji</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils.html">Koji Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tasks.html">Tasks Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../containers.html">Running Koji in Containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../supported_platforms.html">Supported Platforms</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../releases.html">Releases</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../CVEs/CVEs.html">Koji CVEs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../migrations/migrations.html">Migrations</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="release_notes.html">Release Notes</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.27.html">Koji 1.27.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.26.1.html">Koji 1.26.1 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.26.html">Koji 1.26.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.25.1.html">Koji 1.25.1 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.25.html">Koji 1.25.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.24.1.html">Koji 1.24.1 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.24.html">Koji 1.24.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.23.1.html">Koji 1.23.1 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.23.html">Koji 1.23.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.22.1.html">Koji 1.22.1 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.22.html">Koji 1.22.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.21.1.html">Koji 1.21.1 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.21.html">Koji 1.21.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.20.1.html">Koji 1.20.1 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.20.html">Koji 1.20.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.19.1.html">Koji 1.19.1 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.19.html">Koji 1.19.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.18.1.html">Koji 1.18.1 Release Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.18.html">Koji 1.18.0 Release notes</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Koji 1.17.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.16.2.html">Koji 1.16.2 Release Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.16.1.html">Koji 1.16.1 Release Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.16.html">Koji 1.16.0 Release notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.15.1.html">Koji 1.15.1 Release Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.15.html">Koji 1.15 Release Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.14.html">Koji 1.14 Release Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="release_notes_1.13.html">Koji 1.13 Release Notes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Administration Guide/index.html">Administration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../User Guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Developer Guide/index.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../runs_here.html">Runs Here</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Koji</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Operations Guide</a> &raquo;</li>
          <li><a href="../releases.html">Releases</a> &raquo;</li>
          <li><a href="release_notes.html">Release Notes</a> &raquo;</li>
      <li>Koji 1.17.0 Release notes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/Operations Guide/release_notes/release_notes_1.17.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="koji-1-17-0-release-notes">
<h1>Koji 1.17.0 Release notes<a class="headerlink" href="#koji-1-17-0-release-notes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="migrating-from-koji-1-16">
<h2>Migrating from Koji 1.16<a class="headerlink" href="#migrating-from-koji-1-16" title="Permalink to this headline">¶</a></h2>
<p>For details on migrating see <a class="reference internal" href="../migrations/migrating_to_1.17.html"><span class="doc">Migrating to Koji 1.17</span></a></p>
</div>
<div class="section" id="security-fixes">
<h2>Security Fixes<a class="headerlink" href="#security-fixes" title="Permalink to this headline">¶</a></h2>
<p><strong>CVE-2018-1002161 - SQL injection in multiple remote calls</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1274">https://pagure.io/koji/pull-request/1274</a></div>
</div>
<p>This release includes the fix for <a class="reference internal" href="../CVEs/CVE-2018-1002161.html"><span class="doc">CVE-2018-1002161</span></a></p>
</div>
<div class="section" id="client-changes">
<h2>Client Changes<a class="headerlink" href="#client-changes" title="Permalink to this headline">¶</a></h2>
<p><strong>Volume id option for livemedia and livecd tasks</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1227">https://pagure.io/koji/pull-request/1227</a></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">spin-livecd</span></code> and <code class="docutils literal notranslate"><span class="pre">spin-livemedia</span></code> commands now accept a <code class="docutils literal notranslate"><span class="pre">--volid</span></code>
argument to specify the volume id for the media. If unspecified, the
volume id is chosen via the same heuristic as before.</p>
<p>Volume ids must be 32 characters or less.</p>
<p><strong>Build order preserved by clone-tag</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1014">https://pagure.io/koji/pull-request/1014</a></div>
</div>
<p>This is an improvement to the <code class="docutils literal notranslate"><span class="pre">clone-tag</span></code> command. Previously, when the
command was used without the <code class="docutils literal notranslate"><span class="pre">--latest-only</span></code> option, it could get the
ordering of builds wrong in the destination tag. Now, the order will
match the source tag.</p>
<p><strong>Configurable authentication timeout</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1172">https://pagure.io/koji/pull-request/1172</a></div>
</div>
<p>Previously, the network timeout during authentication was hard coded to
60 seconds. It is now configurable via the <code class="docutils literal notranslate"><span class="pre">auth_timeout</span></code> configuration
option.</p>
<p><strong>Additional information from list-channels command</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/940">https://pagure.io/koji/pull-request/940</a></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">list-channels</span></code> command now shows three separate host counts for
each channel:</p>
<ul class="simple">
<li><p>the number of enabled hosts in the channel</p></li>
<li><p>the number of ready hosts in the channel</p></li>
<li><p>the number of disabled hosts in the channel</p></li>
</ul>
<p><strong>The free-task command requires at least one task-id</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1045">https://pagure.io/koji/pull-request/1045</a></div>
</div>
<p>Previously this command was a no-op when given no arguments. Now it will return an
error.</p>
</div>
<div class="section" id="library-changes">
<h2>Library Changes<a class="headerlink" href="#library-changes" title="Permalink to this headline">¶</a></h2>
<p><strong>Drop encode_int function</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/852">https://pagure.io/koji/pull-request/852</a></div>
</div>
<p>This is a follow up to the large integer support that we added in version 1.14</p>
<p>See also: <a class="reference internal" href="release_notes_1.14.html"><span class="doc">Koji 1.14 Release Notes</span></a></p>
<p>The <code class="docutils literal notranslate"><span class="pre">encode_int</span></code> function is no longer used
and has been dropped from the library.</p>
<p>Because we no longer call <code class="docutils literal notranslate"><span class="pre">encode_int</span></code>, the hub will now always use i8 tags
when returning large integers, rather than returning them as strings in some
cases.</p>
<p><strong>Use custom Kerberos context with krb_login</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1187">https://pagure.io/koji/pull-request/1187</a></div>
</div>
<p>Clients can now pass in their own Kerberos context to
<code class="docutils literal notranslate"><span class="pre">ClientSession.krb_login()</span></code> using
the <code class="docutils literal notranslate"><span class="pre">ctx</span></code> parameter. This is intended for multi-threaded clients.</p>
<p><strong>Custom keyboard interrupt handling in watch_tasks</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/981">https://pagure.io/koji/pull-request/981</a></div>
</div>
<p>The new <code class="docutils literal notranslate"><span class="pre">ki_handler</span></code> option for the <code class="docutils literal notranslate"><span class="pre">koji_cli.lib.watch_tasks()</span></code> function
allows other cli tools to set their own handler for keyboard interrupts.
If specified, the value should be callable and will be called when a
keyboard interrupt is encountered.
If unspecified, the original behavior is retained.</p>
<p><strong>_unique_path() -&gt; unique_path</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/980">https://pagure.io/koji/pull-request/980</a></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">_unique_path</span></code> function is deprecated. It has been replaced
by <code class="docutils literal notranslate"><span class="pre">unique_path</span></code>.</p>
</div>
<div class="section" id="web-ui-changes">
<h2>Web UI Changes<a class="headerlink" href="#web-ui-changes" title="Permalink to this headline">¶</a></h2>
<p><strong>Additional info on builders in channelinfo page</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/989">https://pagure.io/koji/pull-request/989</a></div>
</div>
<p>The channelinfo page now shows enabled/ready status for each host and a count
for each.</p>
</div>
<div class="section" id="builder-changes">
<h2>Builder Changes<a class="headerlink" href="#builder-changes" title="Permalink to this headline">¶</a></h2>
<p><strong>Builder task_avail_delay check</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1176">https://pagure.io/koji/pull-request/1176</a></div>
</div>
<p>This delay works around a deficiency in task scheduling. The default
delay is 300 seconds and can be adjusted with the <code class="docutils literal notranslate"><span class="pre">task_avail_delay</span></code>
option to kojid. However, it is unlikely that admins will need to
adjust this setting.</p>
<p>Despite the name, this does not introduce any new delay compared to the
old behavior. The setting controls how long a host will wait before taking
a task in a given channel-arch “bin” when that host has an available
capacity lower than the median for that bin. Previously, such hosts
could wait forever.</p>
</div>
<div class="section" id="system-changes">
<h2>System Changes<a class="headerlink" href="#system-changes" title="Permalink to this headline">¶</a></h2>
<p><strong>Python 3 Support</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1117">https://pagure.io/koji/pull-request/1117</a></div>
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/891">https://pagure.io/koji/pull-request/891</a></div>
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/921">https://pagure.io/koji/pull-request/921</a></div>
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1184">https://pagure.io/koji/pull-request/1184</a></div>
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1019">https://pagure.io/koji/pull-request/1019</a></div>
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/685">https://pagure.io/koji/pull-request/685</a></div>
<div class="line">…and many fixes</div>
</div>
<p>Support for Python 3 has been extended to all components of Koji. Including:</p>
<ul class="simple">
<li><p>Hub</p></li>
<li><p>Builder</p></li>
<li><p>Web UI</p></li>
<li><p>Utils</p></li>
</ul>
<p><strong>No more messagebus plugin</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1043">https://pagure.io/koji/pull-request/1043</a></div>
</div>
<p>The messagebus plugin has been dropped. The protonmsg plugin is still
available.</p>
<p><strong>Simple mode for mergerepos</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1066">https://pagure.io/koji/pull-request/1066</a></div>
</div>
<p>External repos now have a <code class="docutils literal notranslate"><span class="pre">merge_mode</span></code> option. Valid values are
either <code class="docutils literal notranslate"><span class="pre">koji</span></code> (the old way) or <code class="docutils literal notranslate"><span class="pre">simple</span></code> (a new alternative). This
option can be set with the <code class="docutils literal notranslate"><span class="pre">--mode</span></code> option to the <code class="docutils literal notranslate"><span class="pre">add-external-repo</span></code>
or <code class="docutils literal notranslate"><span class="pre">edit-external-repo</span></code> commands.</p>
<p>When an external repo is merged with simple mode, a number of the complex
filters that Koji normally applies are skipped. This mode still honors
the block list from Koji and ignores duplicate NVRAs, but otherwise
it simply merges the repo in.</p>
<p>Multiple merge modes cannot be combined in a single tag. If a tag
has two external repos with different modes, then the repo will
fail to generate.</p>
<p><strong>Avoid “unknown task” errors in Kojira</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1175">https://pagure.io/koji/pull-request/1175</a></div>
</div>
<p>This is a bug fix for a minor race condition in Kojira that could cause
errors in the log and redundant repo regens.</p>
<p><strong>Full filename display for kojifiles directory indexes</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/1156">https://pagure.io/koji/pull-request/1156</a></div>
</div>
<p>This is simply a change to the default httpd configuration for serving
/mnt/koji. It adds <code class="docutils literal notranslate"><span class="pre">NameWidth=*</span></code> to <code class="docutils literal notranslate"><span class="pre">IndexOptions</span></code> so that long filenames
are fully displayed.</p>
<p><strong>Broader support for target/source/scratch tests in channel policy</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/962">https://pagure.io/koji/pull-request/962</a></div>
</div>
<p>It is now possible to write channel policy rules based on
build target, source, and scratch options for task types other
than <code class="docutils literal notranslate"><span class="pre">build</span></code>.</p>
<p><strong>Longer Build Target names</strong></p>
<div class="line-block">
<div class="line">PR: <a class="reference external" href="https://pagure.io/koji/pull-request/925">https://pagure.io/koji/pull-request/925</a></div>
</div>
<p>Build target names can now be up to 256 characters, the same length
restriction as for tag names.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="release_notes_1.18.html" class="btn btn-neutral float-left" title="Koji 1.18.0 Release notes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="release_notes_1.16.2.html" class="btn btn-neutral float-right" title="Koji 1.16.2 Release Notes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, Mike McLean, Mike B, Dennis Gilmore, Mathieu Bridon, Ian McLeod, Ralph Bean, Adam Miller.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>